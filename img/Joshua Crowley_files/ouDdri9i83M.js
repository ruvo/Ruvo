if (self.CavalryLogger) { CavalryLogger.start_js(["3NMHq"]); }

__d('UFIReactionsStandalone.react',['React','UFICentralUpdates','UFIConstants','UFIDispatcher','UFIDispatcherContext.react','UFIFeedbackContext.react','UFIReactionsLinkImpl.react','UFIReactionStore'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.componentWillMount=function(){'use strict';this.$UFIReactionsStandalone1=new (c('UFIDispatcher'))();this.$UFIReactionsStandalone2={UFIReactionStore:new (c('UFIReactionStore'))(this.$UFIReactionsStandalone1)};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.INITIAL_SERVER,this.props.payload);};j.prototype.componentWillUnmount=function(){'use strict';this.$UFIReactionsStandalone2={};this.$UFIReactionsStandalone1=null;};j.prototype.render=function(){'use strict';return (c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIReactionsStandalone1,stores:this.$UFIReactionsStandalone2},c('React').createElement(c('UFIFeedbackContext.react'),{contextArgs:this.props.contextArgs,render:function(k,l){return (c('React').createElement(c('UFIReactionsLinkImpl.react'),{id:k.ftentidentifier,nuxConfig:k.reactionsNuxConfig,reaction:l.viewerreaction,supportedReactions:l.supportedreactions,feedbackReferrer:k.feedbackReferrer,fluentContentToken:k.fluentContentToken,isLiveVOD:k.isLiveVOD,isLiveStreaming:k.islivestreaming}));}})));};function j(){'use strict';h.apply(this,arguments);}f.exports=j;},null);
__d('VideoChannelEndScreen',['cx','invariant','CSS','DOM','Event','React','ReactDOM','VideoChannelProgressCircle.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l){'use strict';this.$VideoChannelEndScreen1=c('DOM').create('div',{className:"_1szy"});this.$VideoChannelEndScreen2=c('DOM').create('div',{className:"_1szz _2se8"},this.$VideoChannelEndScreen1);this.$VideoChannelEndScreen3=l;c('Event').listen(this.$VideoChannelEndScreen1,'click',k);}j.prototype.showEndScreen=function(k,l,m){'use strict';!k?i(0):void 0;c('CSS').addClass(k,"_1s-2");k.appendChild(this.$VideoChannelEndScreen2);c('ReactDOM').render(c('React').createElement(c('VideoChannelProgressCircle.react'),{makeProgress:l,onProgressDone:m,timeoutSec:j.TIMEOUT}),this.$VideoChannelEndScreen1);};j.prototype.endCountdown=function(k){'use strict';!k?i(0):void 0;this.$VideoChannelEndScreen3&&this.$VideoChannelEndScreen3();c('CSS').removeClass(k,"_1s-2");c('ReactDOM').unmountComponentAtNode(this.$VideoChannelEndScreen1);};j.prototype.getContainer=function(){'use strict';return this.$VideoChannelEndScreen2;};j.TIMEOUT=3;f.exports=j;},null);
__d('VideoChannelUpNextUnit.react',['csx','cx','DOM','Link.react','React','getElementText'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=320;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;n.prototype.render=function(){'use strict';var o=this.props.thumbnail,p=c('DOM').find(o,"._56dc"),q=c('DOM').find(o,"._38a4"),r=p.style.backgroundImage,s=c('getElementText')(q),t={backgroundImage:r},u=(this.props.dialogWidth-m)/2,v={marginLeft:u+'px'};return (c('React').createElement(c('Link.react'),{className:"_4fxr",href:'#',onClick:this.props.onClick,style:v},c('React').createElement('div',{className:"_4fxs",style:t}),c('React').createElement('div',{className:"_4fxt"},c('React').createElement('div',{className:"_4fxu"},'Up Next:'),c('React').createElement('div',{className:"_4fxw"},s))));};function n(){'use strict';j.apply(this,arguments);}n.propTypes={dialogWidth:l.number.isRequired,onClick:l.func.isRequired,thumbnail:l.object.isRequired};f.exports=n;},null);
__d("XVideoChannelViewDetailsAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/channel\/view\/details\/async\/{video_id}\/",{ad_impression_token:{type:"String"},video_id:{type:"Int",required:true},caller:{type:"Enum",defaultValue:"channel_view_from_unknown",enumType:1}});},null);
__d('VideoChannelInteraction',['csx','cx','fbt','invariant','Arbiter','AsyncRequest','CSS','DOM','Event','Keys','Map','Parent','React','ReactDOM','StreamingReactionsTrayEvents','Style','SubscriptionsHandler','UFIRootRegistry','VideoChannelController','VideoChannelEndScreen','VideoChannelLogger','VideoChannelLoggerEvents','VideoChannelLoggerEventTargets','VideoChannelLoggerFields','VideoChannelUpNextUnit.react','VideoChannelViewVariables','VideoPlayerAbortLoadingExperiment','VideoPlayerController','VideoPlayerReason','VideoStripThumbnailCarousel.react','VideoWatchAndScrollController','XVideoChannelViewDetailsAsyncController','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=5000,m=175,n=45,o=80,p=24,q=c('VideoChannelViewVariables').thumbnailRedesign,r=c('VideoChannelViewVariables').videoRedesign,s=c('VideoChannelViewVariables').dynamicAspectRatios,t={},u=16/9,v=u;function w(x){'use strict';this.$VideoChannelInteraction6=x;this.$VideoChannelInteraction1=false;this.$VideoChannelInteraction3=0;this.$VideoChannelInteraction4=0;this.$VideoChannelInteraction13=[];this.$VideoChannelInteraction25=null;this.$VideoChannelInteraction26=[];this.$VideoChannelInteraction15=false;this.$VideoChannelInteraction23=false;this.$VideoChannelInteraction16=new (c('Map'))();this.$VideoChannelInteraction17=new (c('Map'))();this.$VideoChannelInteraction27=false;this.$VideoChannelInteraction28=false;this.$VideoChannelInteraction29=false;this.$VideoChannelInteraction5=new (c('SubscriptionsHandler'))();this.$VideoChannelInteraction7=c('DOM').create('a',{href:'#',className:"_5yhq",'aria-label':j._("Next Video")});this.$VideoChannelInteraction8=c('DOM').create('a',{href:'#',className:"_5yhr",'aria-label':j._("Previous Video")});this.$VideoChannelInteraction30=new (c('VideoChannelEndScreen'))(function(){this.$VideoChannelInteraction35();this.getVideoController().play(c('VideoPlayerReason').USER);}.bind(this));this.$VideoChannelInteraction36();this.$VideoChannelInteraction5.addSubscriptions(c('Event').listen(document,'mousemove',this.$VideoChannelInteraction37.bind(this)),c('Event').listen(document,'click',this.$VideoChannelInteraction37.bind(this)),c('Event').listen(document,'keydown',this.$VideoChannelInteraction38.bind(this)),c('Event').listen(document,'keyup',this.$VideoChannelInteraction39.bind(this)),c('Event').listen(this.$VideoChannelInteraction7,'click',this.$VideoChannelInteraction40.bind(this)),c('Event').listen(this.$VideoChannelInteraction8,'click',this.$VideoChannelInteraction41.bind(this)));this.$VideoChannelInteraction42();this.$VideoChannelInteraction43();}w.prototype.$VideoChannelInteraction43=function(){'use strict';this.$VideoChannelInteraction19=0;this.$VideoChannelInteraction20=false;this.$VideoChannelInteraction5.addSubscriptions(c('Arbiter').subscribe('layer_shown',function(x,y){if(y.type==='DialogX'||y.type==='PhotoSnowlift'){this.$VideoChannelInteraction19=this.$VideoChannelInteraction19+1;if(this.$VideoChannelInteraction19>0){var z=this.getVideoController();if(z.isState('playing')){z.pause(c('VideoPlayerReason').PAGE_VISIBILITY);this.$VideoChannelInteraction20=true;}}this.$VideoChannelInteraction44();}}.bind(this)),c('Arbiter').subscribe('layer_hidden',function(x,y){if(y.type==='DialogX'||y.type==='PhotoSnowlift'){this.$VideoChannelInteraction19=this.$VideoChannelInteraction19-1;if(this.$VideoChannelInteraction19===0&&this.$VideoChannelInteraction20){var z=this.getVideoController();z.play(c('VideoPlayerReason').PAGE_VISIBILITY);this.$VideoChannelInteraction20=false;}this.$VideoChannelInteraction44();}}.bind(this)));};w.prototype.onChannelClose=function(){'use strict';c('CSS').hide(this.$VideoChannelInteraction8);c('CSS').hide(this.$VideoChannelInteraction7);this.$VideoChannelInteraction5&&this.$VideoChannelInteraction5.release();this.$VideoChannelInteraction18&&this.$VideoChannelInteraction18.abandon();clearTimeout(this.$VideoChannelInteraction2);this.$VideoChannelInteraction35();c('UFIRootRegistry').cleanupSnowliftNodes();v=u;};w.prototype.onWindowResize=function(){'use strict';if(s)this.$VideoChannelInteraction45();this.$VideoChannelInteraction42();this.$VideoChannelInteraction46();this.$VideoChannelInteraction47(0);};w.prototype.$VideoChannelInteraction46=function(){'use strict';if(this.$VideoChannelInteraction33&&this.$VideoChannelInteraction32){var x=this.$VideoChannelInteraction6.getVideoHeight()*this.$VideoChannelInteraction33,y=this.$VideoChannelInteraction6.getVideoWidth(),z=y-x,aa=z/2;c('Style').set(this.$VideoChannelInteraction32,'width',this.$VideoChannelInteraction34*n+aa+'px');c('Style').set(this.$VideoChannelInteraction32,'margin-top',o+'px');}};w.prototype.$VideoChannelInteraction42=function(){'use strict';var x=this.$VideoChannelInteraction9,y=false;if(r)try{var aa=this.getVideoControllerForStory(x.children[this.getCurrentAbsoluteIndex()]);if(aa){var ba=aa.getOption('VideoWithLiveBroadcast','isLive');if(ba)y=true;}}catch(z){}var ca=(this.$VideoChannelInteraction6.getAvailableWidth()-this.$VideoChannelInteraction6.getVideoWidth())/2;ca+=this.$VideoChannelInteraction12?-1*m:0;c('Style').set(x,'left',ca+'px');var da=(this.$VideoChannelInteraction6.getAvailableHeight()-this.$VideoChannelInteraction6.getVideoHeight()-(y?o:0))/2;c('Style').set(x,'top',da+'px');c('Style').set(x,'width',this.$VideoChannelInteraction6.getVideoWidth()+'px');c('Style').set(x,'height',this.$VideoChannelInteraction6.getVideoHeight()+'px');};w.prototype.isCenterVideoActive=function(){'use strict';return this.$VideoChannelInteraction3===0;};w.prototype.getCurrentAbsoluteIndex=function(){'use strict';return this.$VideoChannelInteraction3+this.$VideoChannelInteraction4;};w.prototype.$VideoChannelInteraction48=function(x){'use strict';return x+this.$VideoChannelInteraction4;};w.prototype.$VideoChannelInteraction49=function(x){'use strict';return x-this.$VideoChannelInteraction4;};w.prototype.$VideoChannelInteraction50=function(){'use strict';return this.$VideoChannelInteraction6.getDialog();};w.prototype.$VideoChannelInteraction51=function(){'use strict';return this.$VideoChannelInteraction6.getDialogContent();};w.prototype.setTitle=function(x,y){'use strict';if(!q||!r)c('DOM').setContent(this.$VideoChannelInteraction11,x);if(y){var z=this.$VideoChannelInteraction52(),aa=z.currentStory,ba=z.currentThumbnail;!aa?k(0):void 0;!ba?k(0):void 0;this.setFirstStory(aa,ba,true,true);}};w.prototype.$VideoChannelInteraction52=function(){'use strict';var x=this.$VideoChannelInteraction6.getStoryFetcher(),y=x.getPreloadedData(),z=y.stories,aa=y.thumbnails;z=z||[];aa=aa||[];var ba=this.$VideoChannelInteraction6.getWnsChannelVideoIndex();if(ba===0)return {currentStory:null,currentThumbnail:null,prependStories:[],prependThumbnails:[],appendStories:z,appendThumbnails:aa};ba--;return {currentStory:z[ba],currentThumbnail:aa[ba],prependStories:z.slice(0,ba),prependThumbnails:aa.slice(0,ba),appendStories:z.slice(ba+1),appendThumbnails:aa.slice(ba+1)};};w.prototype.$VideoChannelInteraction53=function(x){'use strict';var y={};y[c('VideoChannelLoggerFields').EVENT]=c('VideoChannelLoggerEvents').CLICK;y[c('VideoChannelLoggerFields').STORY_ID]=x.getAttribute('data-story-id');c('VideoChannelLogger').log(y);};w.prototype.$VideoChannelInteraction54=function(x){'use strict';this.updateActiveStory(this.$VideoChannelInteraction48(x),c('VideoPlayerReason').USER);};w.prototype.$VideoChannelInteraction55=function(x){'use strict';var y={};y[c('VideoChannelLoggerFields').EVENT]=c('VideoChannelLoggerEvents').CLICK;y[c('VideoChannelLoggerFields').EVENT_TARGET]=x;c('VideoChannelLogger').log(y);};w.prototype.$VideoChannelInteraction40=function(event){'use strict';this.$VideoChannelInteraction55(c('VideoChannelLoggerEventTargets').NEXT_ARROW);this.$VideoChannelInteraction56();this.$VideoChannelInteraction37();event.stopPropagation();event.preventDefault();};w.prototype.$VideoChannelInteraction56=function(){'use strict';var x=this.getCurrentAbsoluteIndex();if(x<this.$VideoChannelInteraction9.children.length-1){this.updateActiveStory(x+1,c('VideoPlayerReason').AUTOPLAY);return true;}return false;};w.prototype.$VideoChannelInteraction41=function(event){'use strict';this.$VideoChannelInteraction55(c('VideoChannelLoggerEventTargets').PREVIOUS_ARROW);this.$VideoChannelInteraction57();this.$VideoChannelInteraction37();event.stopPropagation();event.preventDefault();};w.prototype.$VideoChannelInteraction57=function(){'use strict';var x=this.getCurrentAbsoluteIndex();if(x>=1){this.updateActiveStory(x-1,c('VideoPlayerReason').AUTOPLAY);return true;}return false;};w.prototype.updateActiveStory=function(x,y){'use strict';var z=this.getCurrentAbsoluteIndex();if(z===x)return;var aa=this.$VideoChannelInteraction9,ba=this.getVideoControllerForStory(aa.children[z]),ca=ba&&ba.isMuted();if(ba&&!ba.isState('finished')){ba.pause(c('VideoPlayerReason').USER);if(c('VideoPlayerAbortLoadingExperiment').canAbort)ba.abortLoading();}var da=aa.children[x],ea=this.getVideoControllerForStory(da);if(ea){c('Arbiter').inform('VideoChannelView/activeStoryChanged',{id:ea.getVideoID()});if(ea.isAd()){c('Arbiter').inform('WebVideoChannelAds/AdsLoaded');y=c('VideoPlayerReason').AUTOPLAY;}if(ca&&!ea.isMuted()){ea.mute();}else if(!ca&&ea.isMuted())ea.unmute();ea.play(y);}var fa=null;if(aa.children.length>x+1){fa=this.getVideoControllerForStory(aa.children[x+1]);if(fa)fa.preload();}this.$VideoChannelInteraction3=this.$VideoChannelInteraction49(x);c('VideoChannelLogger').setPosition(this.$VideoChannelInteraction3);if(!da.getAttribute('channel-vpv-logged')){var ga={};da.setAttribute('channel-vpv-logged','1');ga[c('VideoChannelLoggerFields').EVENT]=c('VideoChannelLoggerEvents').VPV;ga[c('VideoChannelLoggerFields').STORY_ID]=da.getAttribute('data-story-id');ga[c('VideoChannelLoggerFields').IS_AD]=ea?ea.isAd():false;c('VideoChannelLogger').log(ga);}this.$VideoChannelInteraction58();};w.prototype.$VideoChannelInteraction58=function(){'use strict';var x=this.$VideoChannelInteraction9,y=this.getCurrentAbsoluteIndex();if(y>0){c('CSS').show(this.$VideoChannelInteraction8);}else c('CSS').hide(this.$VideoChannelInteraction8);for(var z=0;z<x.children.length;z++){var aa=z===y;c('CSS').conditionClass(x.children[z],"_1kfp",aa);c('CSS').conditionClass(this.$VideoChannelInteraction13[z],"_57j4",aa);}this.$VideoChannelInteraction24=c('DOM').find(x.children[y],"._21mb");if(!s){this.$VideoChannelInteraction24.insertBefore(this.$VideoChannelInteraction8,this.$VideoChannelInteraction24.firstChild);this.$VideoChannelInteraction24.appendChild(this.$VideoChannelInteraction7);}if(y<x.children.length-1||this.$VideoChannelInteraction6.hasNext()){c('CSS').show(this.$VideoChannelInteraction7);}else c('CSS').hide(this.$VideoChannelInteraction7);this.$VideoChannelInteraction47(0);var ba=this.$VideoChannelInteraction6.getStoryFetcher(),ca=ba?ba.getPreloadedData():{stories:[]},da=ca.stories;if(y>=x.children.length-2&&this.$VideoChannelInteraction6.hasNext()){this.$VideoChannelInteraction59();}else if(y===0&&da.length===0)this.$VideoChannelInteraction6.fetchStories(false,function(ea,fa){this.prependStories(ea,fa);}.bind(this),function(ea){this.showThumbnailPlaceholders(ea,false);}.bind(this));if(this.$VideoChannelInteraction12)this.$VideoChannelInteraction60(this.$VideoChannelInteraction9.children[y],this.getVideoController().getVideoID(),this.getVideoController().getAdClientToken());this.$VideoChannelInteraction6.getViewportTracker().fireTimer();this.$VideoChannelInteraction6.getViewportTracker().updateTimeTrackingData(false,'scroll');if(s)this.$VideoChannelInteraction45();};w.prototype.$VideoChannelInteraction45=function(){'use strict';if(!this.$VideoChannelInteraction17.size)return;var x=t[this.getVideoController().getVideoID()]||u;v=x;var y=this.$VideoChannelInteraction6.getVideoHeight(),z=Math.min(this.$VideoChannelInteraction6.getAvailableVideoWidth(),x*y);this.$VideoChannelInteraction6.setVideoDimensions(z,y,this.$VideoChannelInteraction6.getExtraThumbnailHeight());this.$VideoChannelInteraction42();this.$VideoChannelInteraction46();};w.prototype.showThumbnailPlaceholders=function(x,y){'use strict';var z=y?0:x;this.$VideoChannelInteraction47(z);};w.prototype.$VideoChannelInteraction37=function(){'use strict';this.$VideoChannelInteraction61();this.$VideoChannelInteraction2=setTimeout(this.$VideoChannelInteraction62.bind(this),l);};w.prototype.$VideoChannelInteraction39=function(x){'use strict';if(x.keyCode===c('Keys').RIGHT){this.$VideoChannelInteraction28=false;}else if(x.keyCode===c('Keys').LEFT)this.$VideoChannelInteraction29=false;};w.prototype.$VideoChannelInteraction38=function(x){'use strict';this.$VideoChannelInteraction61();this.$VideoChannelInteraction2=setTimeout(this.$VideoChannelInteraction62.bind(this),l);var y=c('CSS').matchesSelector(x.target,"._gn2"),z=this.$VideoChannelInteraction12&&(c('CSS').matchesSelector(x.target,"._5rpu")||c('CSS').hasClass(x.target,'UFIAddCommentInput')),aa=c('CSS').matchesSelector(x.target,"._iuw");if(y||z||aa||this.$VideoChannelInteraction19>0||this.getVideoController().isFullscreen())return;if(x.keyCode===c('Keys').RIGHT&&!this.$VideoChannelInteraction28){this.$VideoChannelInteraction28=true;this.$VideoChannelInteraction55(c('VideoChannelLoggerEventTargets').NEXT_ARROW_KEY);this.$VideoChannelInteraction56();event.preventDefault();}else if(x.keyCode===c('Keys').LEFT&&!this.$VideoChannelInteraction29){this.$VideoChannelInteraction29=true;this.$VideoChannelInteraction55(c('VideoChannelLoggerEventTargets').PREVIOUS_ARROW_KEY);this.$VideoChannelInteraction57();event.preventDefault();}else if(x.keyCode===c('Keys').SPACE){var ba=this.getVideoController();if(ba.isState('playing')){ba.pause(c('VideoPlayerReason').USER);}else if(ba.isState('paused')||ba.isState('finished')||ba.isState('ready'))ba.play(c('VideoPlayerReason').USER);}};w.prototype.$VideoChannelInteraction62=function(){'use strict';if(!this.getVideoController().isState('playing'))return;if(!this.$VideoChannelInteraction1&&c('VideoChannelViewVariables').dark_mode){this.$VideoChannelInteraction1=true;c('CSS').addClass(this.$VideoChannelInteraction50().getRoot(),"_1kf_");}};w.prototype.$VideoChannelInteraction61=function(){'use strict';clearTimeout(this.$VideoChannelInteraction2);if(this.$VideoChannelInteraction1){this.$VideoChannelInteraction1=false;c('CSS').removeClass(this.$VideoChannelInteraction50().getRoot(),"_1kf_");}};w.prototype.$VideoChannelInteraction36=function(){'use strict';var x=this.$VideoChannelInteraction51();this.$VideoChannelInteraction9=c('DOM').create('div',{className:"_1kfk"});c('DOM').appendContent(x,this.$VideoChannelInteraction9);this.$VideoChannelInteraction21=c('DOM').create('div');c('ReactDOM').render(c('React').createElement('div',{className:q?"_4hvx":''},c('React').createElement('div',{className:"_r7b"},c('React').createElement('div',{className:"_5g7c"}),c('React').createElement('div',{className:"_r7d"})),c('React').createElement('div',{className:"_1sz-"})),this.$VideoChannelInteraction21);c('DOM').appendContent(x,this.$VideoChannelInteraction21);this.$VideoChannelInteraction11=c('DOM').find(this.$VideoChannelInteraction50().getInnerContent(),"._5g7c");this.$VideoChannelInteraction10=c('DOM').find(this.$VideoChannelInteraction50().getInnerContent(),"._r7d");this.$VideoChannelInteraction22=c('DOM').find(this.$VideoChannelInteraction21,"._1sz-");};w.prototype.$VideoChannelInteraction63=function(){'use strict';this.$VideoChannelInteraction55(c('VideoChannelLoggerEventTargets').UP_NEXT);this.$VideoChannelInteraction56();};w.prototype.$VideoChannelInteraction64=function(x){'use strict';var y=this.getCurrentAbsoluteIndex();if(!this.$VideoChannelInteraction15&&this.$VideoChannelInteraction13.length>y+1&&x===this.getVideoController()){var z=this.$VideoChannelInteraction13[y+1];if(z){c('ReactDOM').render(c('React').createElement(c('VideoChannelUpNextUnit.react'),{dialogWidth:this.$VideoChannelInteraction6.getAvailableWidth(),onClick:this.$VideoChannelInteraction63.bind(this),thumbnail:z}),this.$VideoChannelInteraction22);c('CSS').addClass(this.$VideoChannelInteraction21,"_1sz_");this.$VideoChannelInteraction23=true;}}};w.prototype.$VideoChannelInteraction65=function(){'use strict';c('CSS').removeClass(this.$VideoChannelInteraction21,"_1sz_");this.$VideoChannelInteraction23=false;};w.prototype.$VideoChannelInteraction66=function(x){'use strict';this.$VideoChannelInteraction5.addSubscriptions(x.addListener('updateStatus',function(y){if(y.position!==undefined){var z=x.getPlaybackDuration();if(x===this.getVideoController()&&z&&z-y.position<5){if(!this.$VideoChannelInteraction23)this.$VideoChannelInteraction64(x);}else this.$VideoChannelInteraction65();}}.bind(this)));};w.prototype.$VideoChannelInteraction67=function(x){'use strict';this.$VideoChannelInteraction5.addSubscriptions(x.addListener('beginPlayback',this.$VideoChannelInteraction35.bind(this)),x.addListener('finishPlayback',function(){var y=this.$VideoChannelInteraction6.isOpen()&&x===this.getVideoController()&&!x.isFullscreen();if(y)this.$VideoChannelInteraction44();}.bind(this)));};w.prototype.$VideoChannelInteraction44=function(){'use strict';var x=this.getVideoController();if(x.isState('finished')){var y=this.getCurrentAbsoluteIndex(),z=y===this.$VideoChannelInteraction9.children.length-1,aa=true;if(c('VideoChannelViewVariables').autoplaySettingDisabled||z||!r&&!q&&this.$VideoChannelInteraction12||this.$VideoChannelInteraction27||this.$VideoChannelInteraction19!=0)aa=false;if(x.getOption('VideoLiveEndscreen','enabled')){if(aa)this.$VideoChannelInteraction31=setTimeout(this.$VideoChannelInteraction68.bind(this),c('VideoChannelEndScreen').TIMEOUT*1000);return;}this.$VideoChannelInteraction69(aa);}};w.prototype.$VideoChannelInteraction69=function(x){'use strict';this.$VideoChannelInteraction61();this.$VideoChannelInteraction30.showEndScreen(this.$VideoChannelInteraction24,x,this.$VideoChannelInteraction68.bind(this));};w.prototype.$VideoChannelInteraction35=function(){'use strict';if(this.$VideoChannelInteraction31){clearTimeout(this.$VideoChannelInteraction31);this.$VideoChannelInteraction31=null;}this.$VideoChannelInteraction30.endCountdown(this.$VideoChannelInteraction24);};w.prototype.$VideoChannelInteraction68=function(){'use strict';if(this.getVideoController().isState('finished')){this.$VideoChannelInteraction35();if(this.$VideoChannelInteraction56()){var x={};x[c('VideoChannelLoggerFields').EVENT]=c('VideoChannelLoggerEvents').AUTO_ADVANCE;x[c('VideoChannelLoggerFields').POSITION_IN_CHANNEL]=this.getCurrentAbsoluteIndex()-1;c('VideoChannelLogger').log(x);}}};w.prototype.$VideoChannelInteraction47=function(x){'use strict';var y=this.$VideoChannelInteraction6.getAvailableWidth();if(q)y-=p;c('ReactDOM').render(c('React').createElement(c('VideoStripThumbnailCarousel.react'),{dialogWidth:y,extraThumbnailHeight:this.$VideoChannelInteraction6.getExtraThumbnailHeight(),pendingPreviousThumbnails:x,thumbnails:this.$VideoChannelInteraction13.slice(0),index:this.getCurrentAbsoluteIndex(),hasNext:this.$VideoChannelInteraction6.hasNext(),loadNextItems:this.$VideoChannelInteraction59.bind(this)}),this.$VideoChannelInteraction10);};w.prototype.$VideoChannelInteraction59=function(){'use strict';this.$VideoChannelInteraction6.fetchStories(true,function(x,y){this.appendStories(x,y);}.bind(this));};w.prototype.getVideoController=function(){'use strict';var x=this.$VideoChannelInteraction9.children[this.getCurrentAbsoluteIndex()],y=this.getVideoControllerForStory(x);!y?k(0):void 0;return y;};w.prototype.$VideoChannelInteraction70=function(x,y,z){'use strict';var aa=void 0;if(!z){this.$VideoChannelInteraction4++;aa=-this.$VideoChannelInteraction4;this.$VideoChannelInteraction9.insertBefore(x,this.$VideoChannelInteraction9.childNodes[0]);this.$VideoChannelInteraction13.unshift(y);}else{aa=this.$VideoChannelInteraction9.children.length-this.$VideoChannelInteraction4;this.$VideoChannelInteraction9.appendChild(x);this.$VideoChannelInteraction13.push(y);}this.$VideoChannelInteraction5.addSubscriptions(c('Event').listen(x,'click',this.$VideoChannelInteraction53.bind(this,x)),c('Event').listen(y,'click',function(ca,event){if(c('Parent').bySelector(event.target,"._4hvy"))return;if(this.$VideoChannelInteraction15){this.$VideoChannelInteraction55(c('VideoChannelLoggerEventTargets').THUMBNAIL);this.$VideoChannelInteraction54(ca);event.preventDefault();}}.bind(this,aa)));if(!this.$VideoChannelInteraction17.has(x.id)){var ba=this.$VideoChannelInteraction6.findVideoControllerForStory(x);if(ba){this.$VideoChannelInteraction16.set(ba,x);this.$VideoChannelInteraction17.set(x.id,ba);}}this.$VideoChannelInteraction6.getViewportTracker().invalidateAllStoriesCache();};w.prototype.$VideoChannelInteraction71=function(){'use strict';for(var x=0;x<this.$VideoChannelInteraction26.length;x++){var y=this.$VideoChannelInteraction26[x];c('Style').set(y,'opacity','');}this.$VideoChannelInteraction25=null;this.$VideoChannelInteraction26=[];};w.prototype.$VideoChannelInteraction72=function(x){'use strict';if(!this.$VideoChannelInteraction25)this.$VideoChannelInteraction25=c('setImmediate')(this.$VideoChannelInteraction71.bind(this));this.$VideoChannelInteraction26.push(x);c('Style').set(x,'opacity',0);};w.prototype.shouldShowSidePanelOnLoad=function(){'use strict';var x=this.getVideoController(),y=x.getOption('VideoWithLiveBroadcast','isLive'),z=x.getOption('VideoWithVODBroadcast','isLiveVOD'),aa=x.getOption('FeedAutoplay','shouldOpenSidePaneInChannelView');return q||r||y||z||aa;};w.prototype.setFirstStory=function(x,y,z,aa){'use strict';this.$VideoChannelInteraction72(c('DOM').find(x,"._23if"));this.$VideoChannelInteraction72(c('DOM').find(x,"._23ig"));if(!z){var ba=this.$VideoChannelInteraction6.getWNSRootVideoPlayerController(),ca=c('DOM').find(x,"._1kg0");!ba?k(0):void 0;var da=ba.getRootNode();c('DOM').replace(ca,da);this.$VideoChannelInteraction70(x,y,false);this.$VideoChannelInteraction58();this.registerVideoController(ba);return;}this.$VideoChannelInteraction70(x,y,true);this.$VideoChannelInteraction58();var ea=this.$VideoChannelInteraction6.getOriginalVideoPlayerController();if(!ea)setTimeout(function(){if(this.shouldShowSidePanelOnLoad())this.$VideoChannelInteraction73();var oa=this.$VideoChannelInteraction6.getVideoControllers();if(!oa.length)return;var pa=oa[0].getOption('WatchAndScroll','isEligible');this.$VideoChannelInteraction6.updateWNSEligibilityButton(pa);}.bind(this));if(ea){var fa=this.$VideoChannelInteraction52(),ga=fa.prependStories,ha=fa.prependThumbnails,ia=fa.appendStories,ja=fa.appendThumbnails;if(!aa){var ka=c('DOM').find(x,"._1kg0"),la=ea.getRootNode();c('DOM').replace(ka,la);}else{var ma=c('DOM').scry(x,"._5v-_");if(ma.length===1&&ma[0].childNodes.length===0)ma[0].appendChild(ea.getRootNode());}ea.setDimensions(this.$VideoChannelInteraction6.getVideoWidth(),this.$VideoChannelInteraction6.getVideoHeight());if(!ea.isState('paused'))ea.play(c('VideoPlayerReason').USER);this.$VideoChannelInteraction66(ea);this.$VideoChannelInteraction67(ea);this.$VideoChannelInteraction16.set(ea,x);this.$VideoChannelInteraction17.set(x.id,ea);if(this.shouldShowSidePanelOnLoad())this.$VideoChannelInteraction73();this.prependStories(ga,ha);this.appendStories(ia,ja);this.$VideoChannelInteraction6.registerWNSVideoControllers();this.$VideoChannelInteraction6.registerChannelInteractionsFromWNS();var na=ea.getOption('WatchAndScroll','isEligible');this.$VideoChannelInteraction6.updateWNSEligibilityButton(na);}this.$VideoChannelInteraction6.hideLoadingState();this.$VideoChannelInteraction74();this.$VideoChannelInteraction58();};w.prototype.appendStories=function(x,y){'use strict';for(var z=0;z<x.length;z++){var aa=x[z],ba=y[z];this.$VideoChannelInteraction72(c('DOM').find(aa,"._21mb"));this.$VideoChannelInteraction72(ba);this.$VideoChannelInteraction70(aa,ba,true);}this.$VideoChannelInteraction58();};w.prototype.prependStories=function(x,y){'use strict';x=x.reverse();y=y.reverse();for(var z=0;z<x.length;z++)this.$VideoChannelInteraction70(x[z],y[z],false);this.$VideoChannelInteraction58();};w.prototype.$VideoChannelInteraction73=function(event){'use strict';this.$VideoChannelInteraction55(c('VideoChannelLoggerEventTargets').SHOW_SIDE_PANE);event&&event.preventDefault();if(this.$VideoChannelInteraction12)return;this.$VideoChannelInteraction12=true;this.$VideoChannelInteraction60(this.$VideoChannelInteraction9.children[this.getCurrentAbsoluteIndex()],this.getVideoController().getVideoID(),this.getVideoController().getAdClientToken());c('CSS').addClass(this.$VideoChannelInteraction50().getRoot(),"_57bj");c('Arbiter').inform(c('StreamingReactionsTrayEvents').ShowChannelViewDetails);this.$VideoChannelInteraction44();this.$VideoChannelInteraction42();};w.prototype.$VideoChannelInteraction60=function(x,y,z){'use strict';this.$VideoChannelInteraction18&&this.$VideoChannelInteraction18.abandon();var aa=c('DOM').scry(x,"._260p")[0];if(!aa){var ba=c('DOM').scry(x,"._5pc9"),ca=ba[0];if(!ca||!ca.childNodes||!ca.childNodes.length)aa=c('DOM').scry(x,"._3upq")[0];}var da=this.$VideoChannelInteraction6.getVideoChainingCaller(),ea=c('XVideoChannelViewDetailsAsyncController').getURIBuilder().setInt('video_id',y).setEnum('caller',da);if(z)ea.setString('ad_impression_token',z);if(aa){this.$VideoChannelInteraction18=new (c('AsyncRequest'))().setRelativeTo(aa).setURI(ea.getURI()).setMethod('GET').setReadOnly(true).setHandler(function(){this.$VideoChannelInteraction18=null;}.bind(this)).setErrorHandler(function(){this.$VideoChannelInteraction18=null;}.bind(this));this.$VideoChannelInteraction18.send();}};w.prototype.$VideoChannelInteraction75=function(event){'use strict';this.$VideoChannelInteraction55(c('VideoChannelLoggerEventTargets').HIDE_SIDE_PANE);this.$VideoChannelInteraction18&&this.$VideoChannelInteraction18.abandon();this.$VideoChannelInteraction12=false;c('CSS').removeClass(this.$VideoChannelInteraction50().getRoot(),"_57bj");c('Arbiter').inform(c('StreamingReactionsTrayEvents').HideChannelViewDetails);this.$VideoChannelInteraction42();this.$VideoChannelInteraction44();event&&event.preventDefault();};w.prototype.$VideoChannelInteraction74=function(){'use strict';var x=this.$VideoChannelInteraction50().getRoot();if(this.$VideoChannelInteraction15){c('CSS').removeClass(x,"_r7e");}else c('CSS').addClass(x,"_r7e");this.$VideoChannelInteraction15=!this.$VideoChannelInteraction15;};w.prototype.registerShowDetailsLink=function(x){'use strict';c('Event').listen(x,'click',function(){var y=w.getInteraction();!y?k(0):void 0;y.$VideoChannelInteraction73();});};w.prototype.registerHideDetailsLink=function(x){'use strict';c('Event').listen(x,'click',function(){var y=w.getInteraction();!y?k(0):void 0;y.$VideoChannelInteraction75();});};w.prototype.registerLiveReactionsInput=function(x,y,z){'use strict';this.$VideoChannelInteraction32=x;this.$VideoChannelInteraction33=y;this.$VideoChannelInteraction34=z;this.$VideoChannelInteraction46();};w.prototype.registerShareSheetVisibility=function(x){'use strict';var y=w.getInteraction();!y?k(0):void 0;y.$VideoChannelInteraction27=x;y.$VideoChannelInteraction44();};w.prototype.registerVideoController=function(x){'use strict';this.$VideoChannelInteraction66(x);this.$VideoChannelInteraction67(x);var y=c('VideoChannelController').getVideoChannel();if(!y)return;x.setIsInChannel(true);y.registerVideoController(x);if(this.$VideoChannelInteraction16.has(x))return;var z=this.findStoryForVideoController(x);if(z){this.$VideoChannelInteraction16.set(x,z);this.$VideoChannelInteraction17.set(z.id,x);}};w.prototype.findStoryForVideoController=function(x){'use strict';for(var y=0;y<this.$VideoChannelInteraction9.children.length;++y){var z=this.$VideoChannelInteraction9.children[y];if(z.contains(x.getRootNode()))return z;}return null;};w.prototype.getVideoControllerForStory=function(x){'use strict';return this.$VideoChannelInteraction17.get(x.id);};w.prototype.getStoryForVideoController=function(x){'use strict';return this.$VideoChannelInteraction16.get(x);};w.prototype.getStoryIndex=function(x){'use strict';for(var y=0;y<this.$VideoChannelInteraction9.children.length;++y)if(x===this.$VideoChannelInteraction9.children[y])return y;return -1;};w.getInteraction=function(){'use strict';var x=c('VideoChannelController').getVideoChannel();if(!x)return null;var y=x.getInteraction();if(!y){y=new w(x);x.setInteraction(y);}return y;};w.setTitle=function(x,y){'use strict';var z=w.getInteraction();if(!z)return;z.setTitle(x,y);};w.setFirstStory=function(x,y,z){'use strict';var aa=w.getInteraction();if(!aa)return;aa.setFirstStory(x,y,z);};w.registerShowDetailsLink=function(x){'use strict';var y=w.getInteraction();if(!y){c('VideoWatchAndScrollController').registerChannelInteraction(function(){var z=w.getInteraction();!z?k(0):void 0;z.registerShowDetailsLink(x);});return;}y.registerShowDetailsLink(x);};w.registerHideDetailsLink=function(x){'use strict';var y=w.getInteraction();if(!y){c('VideoWatchAndScrollController').registerChannelInteraction(function(){var z=w.getInteraction();!z?k(0):void 0;z.registerHideDetailsLink(x);});return;}y.registerHideDetailsLink(x);};w.registerLiveReactionsInput=function(x,y,z){'use strict';var aa=w.getInteraction();if(!aa){c('VideoWatchAndScrollController').registerChannelInteraction(function(){var ba=w.getInteraction();!ba?k(0):void 0;ba.registerLiveReactionsInput(x,y,z);});return;}aa.registerLiveReactionsInput(x,y,z);};w.registerShareSheetVisibility=function(x){'use strict';var y=w.getInteraction();if(!y){c('VideoWatchAndScrollController').registerChannelInteraction(function(){var z=w.getInteraction();!z?k(0):void 0;z.registerShareSheetVisibility(x);});return;}y.registerShareSheetVisibility(x);};w.registerVideoController=function(x){'use strict';var y=w.getInteraction();if(!y)return;y.registerVideoController(x);};w.registerAspectRatio=function(x,y){'use strict';t[x]=y;var z=w.getInteraction();if(s&&z&&z.$VideoChannelInteraction16.size){var aa=z.getCurrentAbsoluteIndex(),ba=z.$VideoChannelInteraction9,ca=z.getVideoControllerForStory(ba.children[aa]);if(v!==y&&ca&&ca.getVideoID()===x)z.$VideoChannelInteraction58();}};f.exports=w;},null);
__d('VideoChannelShareButton.react',['React','UFIShareNowMenuBootloader.react','VideoChannelInteraction'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){'use strict';var k=this.props,l=k.endpoint,m=k.endpointData,n=function(){c('VideoChannelInteraction').registerShareSheetVisibility(true);},o=function(){c('VideoChannelInteraction').registerShareSheetVisibility(false);};return (c('React').createElement(c('UFIShareNowMenuBootloader.react'),{endpoint:l,endpointData:m,onShow:n,onHide:o}));};function j(){'use strict';h.apply(this,arguments);}f.exports=j;},null);