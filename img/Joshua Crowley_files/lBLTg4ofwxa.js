if (self.CavalryLogger) { CavalryLogger.start_js(["mjAE\/"]); }

__d('ChatUnreadCount',['ChatDispatcher','ChatUnreadCountActionTypes','Map','MercuryIDs','MercurySingletonProvider','MercuryThreadInformer','MercuryThreads','MercuryUnreadState','isInFocusMode'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();h.getForFBID=function(j){return i.getForFBID(j);};h.get=function(){return i.get();};function h(j){this.$ChatUnreadCount1=j;this.$ChatUnreadCount2=c('MercuryThreadInformer').getForFBID(j);this.$ChatUnreadCount3=c('MercuryThreads').getForFBID(j);this.$ChatUnreadCount4=new (c('Map'))();this.$ChatUnreadCount5=c('MercuryUnreadState').getForFBID(j);this.setupSubscriptions();}h.prototype.getUnreadCountForUID=function(j){if(!j)return null;var k=c('MercuryIDs').getThreadIDFromUserID(j);if(!this.$ChatUnreadCount5.getIsThreadUnread(k)){this.$ChatUnreadCount4['delete'](j);return 0;}var l=this.$ChatUnreadCount3.getOrFetch(k),m=l&&l.unread_count;this.$ChatUnreadCount4.set(j,m);if(c('isInFocusMode')(k))return 0;return m;};h.prototype.setupSubscriptions=function(){this.$ChatUnreadCount2.subscribe('threads-updated',function(j,k){var l=Object.keys(k).some(function(m){var n=c('MercuryIDs').getUserIDFromThreadID(m);if(!n)return false;var o=this.getUnreadCountForUID(n),p=this.$ChatUnreadCount4.get(n)||0;return o!==p;}.bind(this));if(l)c('ChatDispatcher').dispatch({type:c('ChatUnreadCountActionTypes').COUNT_UPDATED});}.bind(this));this.$ChatUnreadCount2.subscribe('unread-updated',function(){return c('ChatDispatcher').dispatch({type:c('ChatUnreadCountActionTypes').COUNT_UPDATED});});};var i=new (c('MercurySingletonProvider'))(h);f.exports=h;},null);
__d('NotificationBeeperConst',['keyMirror'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={IDLE_DELAY:10000,ACTIVE_DELAY_LONG:4000,FADE_OUT_LENGTH:1500,BeepStates:c('keyMirror')({PENDING:true,RENDERED:true,READY_TO_HIDE:true,FADING_OUT:true})};f.exports=h;},null);
__d('NotificationInterpolator',['Badge.react','React'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=null;if(j.entity.is_viewer_coworker===false||j.entity.is_multi_company_group===true)k=c('React').createElement(c('Badge.react'),{type:'work_non_coworker'});return c('React').createElement('span',{className:'fwb'},i,k);}f.exports=h;},null);
__d('NotificationURI',['BusinessURI.brands','URI','isFacebookURI','VideoPermalinkURI'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={localize:function(i){i=c('BusinessURI.brands')(i);if(!c('isFacebookURI')(i))return i.toString();var j=i.getSubdomain();return i.getUnqualifiedURI().getQualifiedURI().setSubdomain(j).toString();},snowliftable:function(i){if(!i)return false;i=new (c('URI'))(i);var j=i.getQueryData();return c('isFacebookURI')(i)&&(c('VideoPermalinkURI').isValid(i)||'fbid' in j);},isVaultSetURI:function(i){return this._areEquals(i,'/ajax/vault/sharer_preview.php');},isAlbumDraftRecoveryDialogURI:function(i){return this._areEquals(i,'/ajax/photos/upload/overlay/');},_areEquals:function(i,j){if(!i)return false;i=new (c('URI'))(i);return c('isFacebookURI')(i)&&i.getPath()===j;},_startsWith:function(i,j){if(!i)return false;i=new (c('URI'))(i);return c('isFacebookURI')(i)&&i.getPath().startsWith(j);}};f.exports=h;},null);
__d('NotificationBeeperItemContents.react',['cx','Animation','AsyncRequest','Bootloader','FBProfilePhotoShadow.react','Image.react','ImageBlock.react','NotificationBeeperItemCloseButton.react','NotificationInterpolator','NotificationURI','NotificationUserActions','React','ReactDOM','TextWithEntities.react','Timestamp.react'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return l=(m=j.constructor).call.apply(m,[this].concat(o)),this.$NotificationBeeperItemContents1=function(){c('NotificationUserActions').markNotificationsAsRead([this.props.beep.notificationID]);}.bind(this),this.$NotificationBeeperItemContents2=function(q){this.$NotificationBeeperItemContents1();this.props.onHide();if(q.button===1||q.altKey||q.ctrlKey||q.metaKey||q.shiftKey)return;var r=this.props.beep;if(c('NotificationURI').isAlbumDraftRecoveryDialogURI(r.link)){new (c('AsyncRequest'))(r.link).send();q.preventDefault();}else if(r.photo&&c('NotificationURI').snowliftable(r.link)){c('Bootloader').loadModules(["PhotoSnowlift"],function(s){s.bootstrap(r.link,q.currentTarget);},'NotificationBeeperItemContents.react');q.preventDefault();}else if(r.ajaxifyLink){c('Bootloader').loadModules(["AsyncDialog"],function(s){s.bootstrap(r.ajaxifyLink,q.currentTarget,'dialog');},'NotificationBeeperItemContents.react');q.preventDefault();}}.bind(this),this.$NotificationBeeperItemContents3=function(){this.$NotificationBeeperItemContents1();this.props.onHide();}.bind(this),this.$NotificationBeeperItemContents4=function(){new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go();}.bind(this),l;}k.prototype.componentDidMount=function(){'use strict';this.props.onReadyToHide(this.props.beep.notificationID);};k.prototype.componentDidUpdate=function(l){'use strict';if(l.beep.beepID!==this.props.beep.beepID){this.$NotificationBeeperItemContents4();this.props.onReadyToHide(this.props.beep.notificationID);}};k.prototype.render=function(){'use strict';var l=this.props.beep,m=((l.actors[0]||{}).profile_picture||{}).uri,n=(l.icon||{}).uri;return (c('React').createElement('div',{ref:'inner',className:this.props.className},c('React').createElement(c('NotificationBeeperItemCloseButton.react'),{onClick:this.$NotificationBeeperItemContents3}),c('React').createElement('a',{href:l.link,onClick:this.$NotificationBeeperItemContents2,className:"_3soi"},c('React').createElement(c('ImageBlock.react'),{className:"_3soj",spacing:'medium'},c('React').createElement(c('FBProfilePhotoShadow.react'),{className:"_2yt7"},c('React').createElement(c('Image.react'),{src:m,className:"_3sok"+(!m?' '+"hidden_elem":'')})),c('React').createElement('div',{className:"_3sol"},c('React').createElement(c('TextWithEntities.react'),{renderEmoticons:true,renderEmoji:true,interpolator:c('NotificationInterpolator'),ranges:l.text.ranges,aggregatedranges:l.text.aggregated_ranges,text:l.text.text}),c('React').createElement(c('ImageBlock.react'),{className:"_3som"},c('React').createElement(c('Image.react'),{className:"_1x8t"+(!n?' '+"hidden_elem":''),src:n}),c('React').createElement(c('Timestamp.react'),{time:l.timestamp.time,text:l.timestamp.text,verbose:l.timestamp.verbose})))))));};f.exports=k;},null);
__d('NotificationBeeperItem.react',['cx','Animation','BrowserSupport','NotificationBeeperConst','NotificationBeeperItemContents.react','NotificationBeeperItemRenderersList','React','ReactDOM','Style','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('NotificationBeeperConst').FADE_OUT_LENGTH;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return m=(n=j.constructor).call.apply(n,[this].concat(p)),this.state={fadedIn:false,hidden:false},this.$NotificationBeeperItem2=function(){this.setState({hidden:true});}.bind(this),this.$NotificationBeeperItem3=function(r){if(r in c('NotificationBeeperItemRenderersList'))return c('NotificationBeeperItemRenderersList')[r];return c('NotificationBeeperItemContents.react');},m;}l.prototype.componentDidMount=function(){'use strict';var m;if(c('BrowserSupport').hasCSSAnimations()){m=this.setState.bind(this,{fadedIn:true},null);}else m=function(){new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.item)).from('top','-30px').from('opacity','0').to('top','0px').to('opacity','1').duration(200).ondone(this.setState.bind(this,{fadedIn:true},null)).go();}.bind(this);c('setTimeoutAcrossTransitions')(m,50);this.props.onInserted(this.props.beep);};l.prototype.componentWillUnmount=function(){'use strict';if(this.$NotificationBeeperItem1){this.$NotificationBeeperItem1.stop();this.$NotificationBeeperItem1=null;}};l.prototype.render=function(){'use strict';var m=this.props.beep,n=this.$NotificationBeeperItem3(m.beepRenderer);return c('React').createElement('li',{className:this.state.hidden?"hidden_elem":'',ref:'item','data-gt':m.tracking},c('React').createElement(n,{beep:m,className:"_3sod"+(this.state.fadedIn?' '+"_3soe":''),onHide:this.$NotificationBeeperItem2,onReadyToHide:this.props.onReadyToHide,onPreventHide:this.props.onPreventHide,ref:'itemContents'}));};l.prototype.componentDidUpdate=function(m,n,o){'use strict';if(this.props.fadingOut){if(!this.$NotificationBeeperItem1)this.$NotificationBeeperItem1=new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.item)).from('opacity','1').to('opacity','0').duration(k).ondone(this.$NotificationBeeperItem2).go();c('ReactDOM').findDOMNode(this.refs.item).style.transitionDuration='0ms';}else if(this.$NotificationBeeperItem1){this.$NotificationBeeperItem1.stop();this.$NotificationBeeperItem1=null;c('Style').set(c('ReactDOM').findDOMNode(this.refs.item),'opacity','1');}};f.exports=l;},null);
__d('NotificationImpressions',['AsyncSignal','NotificationTokens','URI'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='/ajax/notifications/impression.php';function i(j,k){var l={ref:k};c('NotificationTokens').untokenizeIDs(j).forEach(function(m,n){l['alert_ids['+n+']']=m;});new (c('AsyncSignal'))(new (c('URI'))(h).getQualifiedURI().toString(),l).send();}f.exports={log:i};},null);
__d('NotificationPhotoThumbnail',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j){if(!j.media||!j.style_list||!j.style_list.length)return null;switch(j.style_list[0]){case 'new_album':case 'album':case 'application':case 'photo':case 'video':case 'video_autoplay':case 'video_inline':return j.media.image;default:return null;}}var i={getThumbnail:function(j,k,l){var m;if(j&&j.length){j.some(function(q){m=h(q);if(m)return true;return false;});if(m)return m;}if(l){var n=l.relevant_comments;if(n&&n.length){var o=n[0].attachments;if(o&&o.length){m=h(o[0]);if(m)return m;}}}if(k){var p=k.attachments;if(p&&p.length)return h(p[0]);}return null;}};f.exports=i;},null);
__d('NotificationSound',['Sound'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=5000;c('Sound').init(['audio/mpeg']);function i(j){this._soundPath=j;this._lastPlayed=0;}Object.assign(i.prototype,{play:function(j){if(!this._soundPath)return;var k=Date.now();if(k-this._lastPlayed<h)return;this._lastPlayed=k;c('Sound').playOnlyIfImmediate(this._soundPath,j);}});f.exports=i;},null);
__d('NotificationBeeper.react',['cx','Arbiter','ChannelConstants','NotificationBeeperConst','NotificationBeeperItem.react','NotificationBeeperPinnedPostLoader','NotificationConstants','NotificationImpressions','NotificationPhotoThumbnail','NotificationSound','NotificationUpdates','NotificationURI','NotificationUserActions','NotifTestIDs','React','WorkFocusModeController','setTimeoutAcrossTransitions','shield'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('WorkFocusModeController').WorkFocusMode,j=c('NotificationBeeperConst').ACTIVE_DELAY_LONG,k=c('NotificationBeeperConst').BeepStates,l=c('NotificationBeeperConst').FADE_OUT_LENGTH,m=c('NotificationBeeperConst').IDLE_DELAY,n=c('NotificationBeeperPinnedPostLoader').payload,o='beeper',p=c('NotificationConstants').PayloadSourceType,q=p.LIVE_SEND,r=p.OTHER_APPLICATION,s=p.CLIENT,t=c('React').createClass({displayName:'NotificationBeeper',getInitialState:function(){return {soundEnabled:this.props.soundEnabled,hovering:false,fading:false,beeps:{}};},componentWillMount:function(){this.subscriptions=[c('NotificationUpdates').subscribe('update-notifications',function(u,v){if(v.payloadsource===q||v.payloadsource===r||v.payloadsource===s){var w=v.nodes;if(w&&w.length){if(i&&i.currentViewerInFocusMode())return;this._handleBeepChanges(this._convertNotifications(w));}}if(v.payloadsource===s)this._handleBeepRemovals(v.hiddenState||{});}.bind(this)),c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('notif_sound_pref_changed'),function(u,v){this.setState({soundEnabled:v.obj.enabled});}.bind(this))];c('Arbiter').inform('NotificationBeeper/mounted',null,c('Arbiter').BEHAVIOR_PERSISTENT);if(n)this._handleBeepChanges(this._convertNotifications(n.nodes));},componentWillUnmount:function(){this.subscriptions.forEach(function(u){u.unsubscribe();});this.subscriptions=null;},_onMouseEnter:function(){this._hideWait&&clearTimeout(this._hideWait);var u=[],v=this.state.beeps;Object.keys(v).forEach(function(w){if(v[w].state!=k.PENDING){u.push(w);}else v[w].state=k.RENDERED;});c('NotificationUserActions').markNotificationsAsSeen(u);this.setState({hovering:true,fading:false,beeps:v});},_onMouseLeave:function(){this._waitToHide(j);this.setState({hovering:false});},_onInsertedItem:function(u){if(!this.state.hovering)this._waitToHide();if(this.state.soundEnabled&&u.sound){if(!this._notifSound)this._notifSound=new (c('NotificationSound'))(this.props.soundPath);this._notifSound.play(u.beepID);}if(this.props.shouldLogImpressions)c('NotificationImpressions').log([u.notificationID],o);},_waitToHide:function(u){this._hideWait&&clearTimeout(this._hideWait);this._hideWait=c('setTimeoutAcrossTransitions')(c('shield')(this._hide,this),u==null?m:u);},_onReadyToHide:function(u,v){this.state.beeps[u].state=k.READY_TO_HIDE;if(!this._hideWait)this._waitToHide(v);},_onPreventHide:function(u){this.state.beeps[u].state=k.RENDERED;},_hide:function(){this._hideWait=null;var u=this.state.beeps;Object.keys(u).forEach(function(v){if(u[v].state==k.READY_TO_HIDE)u[v].state=k.FADING_OUT;});this.setState({fading:true});c('setTimeoutAcrossTransitions')(c('shield')(this._finishHide,this),l);},_finishHide:function(){if(!this.state.fading)return;var u=this.state.beeps;Object.keys(u).forEach(function(v){if(u[v].state==k.FADING_OUT)delete u[v];});this.setState({fading:false,beeps:u});c('setTimeoutAcrossTransitions')(function(){var v=this.state.beeps;Object.keys(v).forEach(function(w){if(v[w].state==k.PENDING)v[w].state=k.RENDERED;});this.setState({beeps:v});}.bind(this));},_handleBeepChanges:function(u){var v=this.state.fading?k.PENDING:k.RENDERED,w=this.state.beeps,x=false;Object.keys(u).reverse().forEach(function(y){var z={state:v,data:u[y]};if(!w[y]||w[y].data.beepID!=z.data.beepID){if(w[y]){x=true;if(z.data.beepUpdatesOnTop)delete w[y];}w[y]=z;}});if(x)this._waitToHide();this.forceUpdate();},_handleBeepRemovals:function(u){var v=this.state.beeps;Object.keys(u).forEach(function(w){if(v[w])v[w].state=k.READY_TO_HIDE;});this._waitToHide(0);this.forceUpdate();},render:function(){var u=this.state.beeps,v=[];Object.keys(u).reverse().forEach(function(y){var z=u[y];if(z.state==k.PENDING)return;v.push(c('React').createElement(c('NotificationBeeperItem.react'),{key:y,fadingOut:this.state.fading&&z.state==k.FADING_OUT,beep:z.data,onInserted:this._onInsertedItem,onReadyToHide:this._onReadyToHide,onPreventHide:this._onPreventHide}));},this);var w=v.length>0,x=(!w?"hidden_elem":'')+(' '+"_50d1");return (c('React').createElement('ul',{ref:'container',className:x,'data-gt':this.props.tracking,'data-testid':c('NotifTestIDs').BEEPER_LIST,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},v));},_convertNotifications:function(u){var v={};u.forEach(function(w){if(!w.showBeep||!w.alert_id)return;var x=w.alert_id,y=x+'-'+w.receivedTime,z=c('NotificationPhotoThumbnail').getThumbnail(w.attachments,w.attached_story);v[x]={notificationID:x,notifID:w.id,beepID:y,beepRenderer:w.beepRenderer,rendererData:w.rendererData,beepUpdatesOnTop:w.beepUpdatesOnTop,actors:w.unaggregatedActors||w.actors,icon:w.icon,link:w.url?c('NotificationURI').localize(w.url):'#',url:w.url,ajaxifyLink:w.ajaxify_url,photo:z,text:w.unaggregatedTitle||w.title,timestamp:w.timestamp,receivedTime:w.receivedTime,sound:!!w.sound,tracking:w.tracking};});return v;}});f.exports=t;},null);
__d('NotificationBeeperContainer',['NotificationBeeper.react','React','ReactDOM'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={renderBeeper:function(i,j){c('ReactDOM').render(c('React').createElement(c('NotificationBeeper.react'),i),j);}};f.exports=h;},null);
__d('ChatTimezoneWarning',['MercuryParticipants','MercuryViewer','MessengerBotIDs'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={updateUserTimezoneWarning:function(i,j,k){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(l){var m=l.employee,n=l.timezone;if(m&&n)c('MercuryParticipants').getMulti(i.participants,function(o){var p={},q=true;for(var r in o){q=q&&o[r].employee;var s=!!c('MessengerBotIDs')[o[r].fbid];if(o[r].timezone!==undefined&&o[r].timezone!==null&&n!==o[r].timezone&&!s){var t=o[r].fbid;p[t]=o[r];}}if(Object.keys(p).length>0&&q){p.self=l;j(p);}else k();});});}};f.exports=h;},null);
__d('ChatUserPersonalUserWarning',['MercuryIDs','MercuryParticipants','MercuryViewer','MercuryEmployeeDualityPreferences'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={updateEmployeePersonalUserWarning:function(i,j,k){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(l){var m=l.employee,n=null;if(l.personal_id)n='fbid:'+l.personal_id;var o=n===l.id,p=c('MercuryIDs').getUserIDFromThreadID(i.thread_id);if(!m||!o||!p||i.participants.length>2||!c('MercuryEmployeeDualityPreferences').duality_warning_gk_check){k();return;}c('MercuryParticipants').getMulti(i.participants,function(q){var r=false,s=null;for(var t in q)if(q[t].personal_id&&p===q[t].personal_id.toString()&&q[t].work_id&&q[t].employee){r=true;s=t;}if(r&&s!==null){j(l,q[s]);}else k();});});}};f.exports=h;},null);
__d('MNCommerceDialogContainer.react',['MNCommerceDialogStateStore','PureStoreBasedStateMixin','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'MNCommerceDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('MNCommerceDialogStateStore'))],statics:{calculateState:function(){var i=c('MNCommerceDialogStateStore').getDialogContainer();return {dialogContainer:i};}},render:function(){var i=this.state.dialogContainer;if(!i)return null;return c('React').createElement(i,null);}});f.exports=h;},null);
__d('MNCommerceDialogContainerMount',['MNCommerceDialogContainer.react','React','ReactDOM'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={mount:function(i){c('ReactDOM').render(c('React').createElement(c('MNCommerceDialogContainer.react'),null),i);}};f.exports=h;},null);
__d('FBRTCConstants',['FBRTCStruct','keyMirror'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={OFFER:'offer',ANSWER:'answer',ICE_CANDIDATE:'ice_candidate',OK:'ok',PING:'ping',HANGUP:'hang_up',OTHER_DISMISS:'other_dismiss',MSG_ACK:'msg_ack',PRANSWER:'pranswer',ICERESTART_OFFER:'icerestart_offer',ICERESTART_ANSWER:'icerestart_answer',PCRESTART_OFFER:'pcrestart_offer',PCRESTART_ANSWER:'pcrestart_answer',SDP_UPDATE:'sdp_update',OFFER_ACK:'offer_ack',OFFER_NACK:'offer_nack',ANSWER_ACK:'answer_ack',SET_VIDEO:'set_video',VIDEO_REQUEST:'video_request',ACK:'ack'},i={AUDIO_ONLY:'audio_only',AUDIO_VIDEO:'audio_video',SCREEN_CONTENT:'screen'},j=c('keyMirror')({NO_VIDEO:null,LQ_VIDEO:null,SD_VIDEO:null,HD_VIDEO:null,CUSTOM_VIDEO:null}),k=new (c('FBRTCStruct'))([{IGNORE_CALL:'IgnoreCall'},{HANGUP_CALL:'HangupCall'},{IN_ANOTHER_CALL:'InAnotherCall'},{ACCEPT_AFTER_HANGUP:'CallEndAcceptAfterHangUp'},{NO_ANSWER_TIMEOUT:'NoAnswerTimeout'},{INCOMING_TIMEOUT:'IncomingTimeout'},{OTHER_INSTANCE_HANDLED:'OtherInstanceHandled'},{SIGNALING_MESSAGE_FAILED:'SignalingMessageFailed'},{CONNECTION_DROPPED:'ConnectionDropped'},{CLIENT_INTERRUPTED:'ClientInterrupted'},{WEBRTC_ERROR:'WebRTCError'},{CLIENT_ERROR:'ClientError'},{NO_PERMISSION:'NoPermission'},{OTHER_NOT_CAPABLE:'OtherNotCapable'},{NO_UI_ERROR:'NoUIShown'},{UNSUPPORTED_VERSION:'VersionUnsupported'},{CALLER_NOT_VISIBLE:'CallerNotVisible'},{CARRIER_BLOCKED:'CarrierBlocked'},{OTHER_CARRIER_BLOCKED:'OtherCarrierBlocked'}]),l={REMOTE_PEER_HANGUP:'CollabRemotePeerHangup',REMOTE_PEER_REJECT:'CollabRemotePeerReject',CLOSED_BY_MCU:'CollabClosedByMcu',CLOSED_AS_STALE:'CollabClosedAsStale',CALL_INITIALIZATION_FAILED:'CollabCallInitializationFailed',SIP_CONNECTION_INITIALIZATION_FAILED:'CollabSipConnectionInitializationFailed',LOST_MCU_CONNECTION:'CollabLostMcuConnection',MCU_NO_AUDIO_STREAM:'CollabMcuNoAudioStream',MCU_INVALID_STREAM_CONFIGURATION:'CollabMcuInvalidStreamConfiguration',UNKNOWN:'CollabUnknown'},m={TOGGLE_SELF_VIEW:5,SUBMIT_STAR_RATING:6,SUBMIT_FEEDBACK:7,START_CALL:9,OPEN_SCREEN_IN_NEW:10},n={ONE_HOUR:'1hour',UNTIL_EIGHT_AM:'8am',ALWAYS:'always'},o=c('keyMirror')({VIDEO:null,AUDIO:null,SCREEN_SHARE:null}),p={PayloadType:h,StreamType:i,VideoQuality:j,CallEndReason:k,CollabCallEndSubreason:l,UIEventType:m,CallBlockingConstants:n,IncomingCallDialogTypes:o,endCallReasonFromString:function(q){return k.strNames.indexOf(q);},callEndReasonString:function(q){if(q<0||q>k.strNames.length)return 'Unknown';return k.strNames[q];},fullCallEndReasonString:function(q,r){return this.callEndReasonString(q)+'_'+(r?'remote':'local');}};f.exports=p;},null);
__d('FBRTCIceStatsParser',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null;i.getInstance=function(){'use strict';if(!h)h=new i();return h;};function i(){'use strict';}i.prototype.extractIceInfo=function(j){'use strict';var k=[],l=j.split("\r\n");for(var m=0;m<l.length;m++){var n=l[m];if(this.$FBRTCIceStatsParser1(n))k.push({gen:this.$FBRTCIceStatsParser2(n),type:this.$FBRTCIceStatsParser3(n)});}return k;};i.prototype.$FBRTCIceStatsParser1=function(j){'use strict';return j.indexOf('candidate:')>-1;};i.prototype.$FBRTCIceStatsParser2=function(j){'use strict';var k=0,l=j.match(/generation (\d+)/);if(l)k=parseInt(l[1],10);return k;};i.prototype.$FBRTCIceStatsParser3=function(j){'use strict';var k=j.match(/typ (host|relay|srflx|prflx)/);if(k){return k[1];}else return 'unknown';};f.exports=i;},null);
__d('FBRTCCallSummary',['FBRTCConstants','FBRTCIceStatsParser','FBRTCLogger','UserAgentData','performanceNow'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=5*60*1000,i={CALL_STARTED:'started',POPUP_OPENED:'opened',SENT_OFFER:'s_o',RECV_OFFER:'r_o',SENT_OFFER_ACK:'s_oack',RECV_OFFER_ACK:'r_oack',SENT_RETRIED_OFFER:'s_o2',RECV_RETRIED_OFFER:'r_o2',SENT_RETRIED_OFFER_ACK:'s_oack2',RECV_RETRIED_OFFER_ACK:'r_oack2',SENT_PRANSWER:'s_pr',RECV_PRANSWER:'r_pr',NETWORK_READY:'network_ready',SENT_ANSWER:'s_a',RECV_ANSWER:'r_a',SENT_ANSWER_ACK:'s_aack',RECV_ANSWER_ACK:'r_aack',SENT_RETRIED_ANSWER:'s_a2',RECV_RETRIED_ANSWER:'r_a2',SENT_RETRIED_ANSWER_ACK:'s_aack2',RECV_RETRIED_ANSWER_ACK:'r_aack2',SENT_OK:'s_ok',RECV_OK:'r_ok',CALL_CONNECTED:'connected',CALL_ENDED:'ended'};j.CURRENT_SUMMARY_VERSION=19;function j(k){'use strict';this.peerID=k.peerID;this.callID=k.callID;this.$FBRTCCallSummary1=k.isCaller;this.$FBRTCCallSummary2=new Date().valueOf();this.$FBRTCCallSummary3=null;this.$FBRTCCallSummary4={};this.$FBRTCCallSummary5=null;this.$FBRTCCallSummary6=null;this.$FBRTCCallSummary7=null;this.$FBRTCCallSummary8=null;this.$FBRTCCallSummary9=null;this.$FBRTCCallSummary10=null;this.$FBRTCCallSummary11={};this.$FBRTCCallSummary12={};this.$FBRTCCallSummary13={};this.$FBRTCCallSummary14={};this.$FBRTCCallSummary15={};this.$FBRTCCallSummary16={};this.$FBRTCCallSummary17=c('performanceNow')();this.$FBRTCCallSummary18=0;this.$FBRTCCallSummary19={};this.$FBRTCCallSummary20=this.$FBRTCCallSummary17;this.$FBRTCCallSummary21=0;this.$FBRTCCallSummary22={};this.addExtraInfo(c('FBRTCLogger').Key.DEVICE_INFO,this.$FBRTCCallSummary23());this.$FBRTCCallSummary24();this.$FBRTCCallSummary25=c('FBRTCIceStatsParser').getInstance();this.$FBRTCCallSummary26=c('FBRTCLogger').getInstance();}j.prototype.toJsonString=function(){'use strict';this.$FBRTCCallSummary9=new Date().valueOf();return JSON.stringify({version:j.CURRENT_SUMMARY_VERSION,peerID:this.peerID,callID:this.callID,isCaller:this.$FBRTCCallSummary1,callType:this.$FBRTCCallSummary27,localVideoDuration:this.$FBRTCCallSummary28,remoteVideoDuration:this.$FBRTCCallSummary29,startTime:this.$FBRTCCallSummary2,trigger:this.$FBRTCCallSummary3,signalingTime:this.$FBRTCCallSummary4,endCallReason:this.$FBRTCCallSummary5,endCallSubreason:this.$FBRTCCallSummary6,isRemoteEnded:this.$FBRTCCallSummary7,lastUpdatedTime:this.$FBRTCCallSummary8,lastSerializedTime:this.$FBRTCCallSummary9,unsetOnRetrieve:this.$FBRTCCallSummary10,openCount:this.$FBRTCCallSummary21,extraInfo:this.$FBRTCCallSummary22,pcStats:this.$FBRTCCallSummary11,captureStats:this.$FBRTCCallSummary12,gen0IceSentCount:this.$FBRTCCallSummary13,gen0IceReceivedCount:this.$FBRTCCallSummary14,iceSentCount:this.$FBRTCCallSummary15,iceReceivedCount:this.$FBRTCCallSummary16,newSignalingTime:this.$FBRTCCallSummary19,accumulatedCallTime:this.$FBRTCCallSummary30()});};j.fromJsonString=function(k){'use strict';var l;try{l=JSON.parse(k);}catch(m){return null;}if(l.version!==j.CURRENT_SUMMARY_VERSION)return null;if(!l.hasOwnProperty('peerID')||!l.hasOwnProperty('callID')||!l.hasOwnProperty('isCaller')||!l.hasOwnProperty('startTime')||!l.hasOwnProperty('trigger')||!l.hasOwnProperty('signalingTime')||!l.hasOwnProperty('endCallReason')||!l.hasOwnProperty('isRemoteEnded')||!l.hasOwnProperty('lastUpdatedTime')||!l.hasOwnProperty('lastSerializedTime'))return null;var n=new j({peerID:l.peerID,callID:l.callID,isCaller:l.isCaller});n.$FBRTCCallSummary2=l.startTime;n.$FBRTCCallSummary3=l.trigger;n.$FBRTCCallSummary4=l.signalingTime;n.$FBRTCCallSummary5=l.endCallReason;n.$FBRTCCallSummary6=l.endCallSubreason;n.$FBRTCCallSummary7=l.isRemoteEnded;n.$FBRTCCallSummary8=l.lastUpdatedTime;n.$FBRTCCallSummary9=l.lastSerializedTime;if(l.callType)n.$FBRTCCallSummary27=l.callType;if(l.localVideoDuration)n.$FBRTCCallSummary28=l.localVideoDuration;if(l.remoteVideoDuration)n.$FBRTCCallSummary29=l.remoteVideoDuration;if(l.unsetOnRetrieve)n.$FBRTCCallSummary10=l.unsetOnRetrieve;if(l.openCount)n.$FBRTCCallSummary21=l.openCount;if(l.extraInfo)n.$FBRTCCallSummary22=l.extraInfo;if(l.pcStats)n.$FBRTCCallSummary11=l.pcStats;if(l.captureStats)n.$FBRTCCallSummary12=l.captureStats;if(l.gen0IceSentCount)n.$FBRTCCallSummary13=l.gen0IceSentCount;if(l.gen0IceReceivedCount)n.$FBRTCCallSummary14=l.gen0IceReceivedCount;if(l.iceSentCount)n.$FBRTCCallSummary15=l.iceSentCount;if(l.iceReceivedCount)n.$FBRTCCallSummary16=l.iceReceivedCount;if(l.newSignalingTime)n.$FBRTCCallSummary19=l.newSignalingTime;if(l.accumulatedCallTime)n.$FBRTCCallSummary18=l.accumulatedCallTime;return n;};j.restoreOrInitialize=function(k,l,m,n,o){'use strict';var p=k.retrieveCallSummary(l,m);if(!p){p=new j({peerID:l,callID:m,isCaller:n});if(o){p.onFullMessageReceived({msg:o});p.onOfferAckSent(o);}else p.onCallStarted(c('FBRTCLogger').Trigger.UNKNOWN);c('FBRTCLogger').getInstance().logError(l,m,'Missing call summary from storage');}else if(p.$FBRTCCallSummary10){p.$FBRTCCallSummary5=null;p.$FBRTCCallSummary6=null;p.$FBRTCCallSummary7=null;delete p.$FBRTCCallSummary4[i.CALL_ENDED];delete p.$FBRTCCallSummary19[i.CALL_ENDED];p.$FBRTCCallSummary10=null;}return p;};j.logSavedSummaries=function(k){'use strict';var l=k.getLoggableSummaries(),m=l.length;if(m<=0)return;var n=c('FBRTCLogger').getInstance(),o=[];for(var p=0;p<m;p++){var q=l[p];n.logEndCallSummary(q);o.push({peerID:q.peerID,callID:q.callID});}k.removeCallSummaries(o);n.logToConsole('Logged pending summaries: '+m);};j.prototype.save=function(k){'use strict';var l=c('performanceNow')(),m=l-this.$FBRTCCallSummary20;if(m>h){this.$FBRTCCallSummary26.logInfo(this.peerID,this.callID,'Summary too old: '+m);return;}k.storeCallSummary(this.peerID,this.callID,this);this.$FBRTCCallSummary20=l;};j.prototype.getLastUpdatedTime=function(){'use strict';return this.$FBRTCCallSummary8;};j.prototype.setLastUpdatedTime=function(k){'use strict';this.$FBRTCCallSummary8=k;};j.prototype.getExtraInfo=function(){'use strict';return this.$FBRTCCallSummary22;};j.prototype.addExtraInfo=function(k,l){'use strict';this.$FBRTCCallSummary22[k]=l;this.$FBRTCCallSummary24();};j.prototype.onCallStarted=function(k){'use strict';this.$FBRTCCallSummary3=k;this.$FBRTCCallSummary31(i.CALL_STARTED);this.$FBRTCCallSummary24();};j.prototype.onPopupOpened=function(){'use strict';this.$FBRTCCallSummary31(i.POPUP_OPENED);this.$FBRTCCallSummary21++;this.$FBRTCCallSummary24();};j.prototype.setPcStats=function(k){'use strict';this.$FBRTCCallSummary11=k;this.$FBRTCCallSummary24();};j.prototype.setVideoCaptureStats=function(k,l){'use strict';this.$FBRTCCallSummary12={w:k,h:l};this.$FBRTCCallSummary24();};j.prototype.setCallType=function(k){'use strict';this.$FBRTCCallSummary27=k;this.$FBRTCCallSummary24();};j.prototype.setVideoDurations=function(k,l){'use strict';this.$FBRTCCallSummary28=k;this.$FBRTCCallSummary29=l;this.$FBRTCCallSummary24();};j.prototype.onOfferAckSent=function(k){'use strict';this.onMessageSent({type:c('FBRTCConstants').PayloadType.OFFER_ACK,flag:k.flag});};j.prototype.onMessageSent=function(k){'use strict';var l=k.flag===1;switch(k.type){case c('FBRTCConstants').PayloadType.OFFER:this.$FBRTCCallSummary32(l,i.SENT_OFFER,i.SENT_RETRIED_OFFER);this.$FBRTCCallSummary33(k,this.$FBRTCCallSummary13,this.$FBRTCCallSummary15);break;case c('FBRTCConstants').PayloadType.ANSWER:this.$FBRTCCallSummary32(l,i.SENT_ANSWER,i.SENT_RETRIED_ANSWER);this.$FBRTCCallSummary33(k,this.$FBRTCCallSummary13,this.$FBRTCCallSummary15);break;case c('FBRTCConstants').PayloadType.OK:this.$FBRTCCallSummary31(i.SENT_OK);break;case c('FBRTCConstants').PayloadType.PRANSWER:this.$FBRTCCallSummary31(i.SENT_PRANSWER);break;case c('FBRTCConstants').PayloadType.OFFER_ACK:this.$FBRTCCallSummary32(l,i.SENT_OFFER_ACK,i.SENT_RETRIED_OFFER_ACK);break;case c('FBRTCConstants').PayloadType.ANSWER_ACK:this.$FBRTCCallSummary32(l,i.SENT_ANSWER_ACK,i.SENT_RETRIED_ANSWER_ACK);break;case c('FBRTCConstants').PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary33(k,this.$FBRTCCallSummary13,this.$FBRTCCallSummary15);break;default:}this.$FBRTCCallSummary24();};j.prototype.$FBRTCCallSummary33=function(k,l,m){'use strict';var n=null,o=null,p=this.$FBRTCCallSummary25.extractIceInfo(k.sdp);for(var q=0;q<p.length;q++){n=p[q].gen;o=p[q].type;if(n===0)this.$FBRTCCallSummary34(l,o);this.$FBRTCCallSummary34(m,o);}};j.prototype.$FBRTCCallSummary34=function(k,l){'use strict';if(!k[l]){k[l]=1;}else k[l]=k[l]+1;};j.prototype.$FBRTCCallSummary35=function(k){'use strict';if(k.isFromMobile())this.addExtraInfo(c('FBRTCLogger').Key.PEER_IS_MOBILE,'1');};j.prototype.onFullMessageReceived=function(k){'use strict';var l=k.msg,m=l.flag===1;switch(l.type){case c('FBRTCConstants').PayloadType.OFFER:this.$FBRTCCallSummary35(k);this.$FBRTCCallSummary32(m,i.RECV_OFFER,i.RECV_RETRIED_OFFER);this.$FBRTCCallSummary33(l,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;case c('FBRTCConstants').PayloadType.ANSWER:this.$FBRTCCallSummary35(k);this.$FBRTCCallSummary32(m,i.RECV_ANSWER,i.RECV_RETRIED_ANSWER);this.$FBRTCCallSummary33(l,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;case c('FBRTCConstants').PayloadType.OK:this.$FBRTCCallSummary31(i.RECV_OK);break;case c('FBRTCConstants').PayloadType.PRANSWER:this.$FBRTCCallSummary31(i.RECV_PRANSWER);break;case c('FBRTCConstants').PayloadType.OFFER_ACK:this.$FBRTCCallSummary32(m,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);break;case c('FBRTCConstants').PayloadType.ANSWER_ACK:this.$FBRTCCallSummary32(m,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK);break;case c('FBRTCConstants').PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary33(l,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;default:}this.$FBRTCCallSummary24();};j.prototype.onMsgAckReceived=function(k,l){'use strict';var m=k.msg.flag===1;if(l){this.$FBRTCCallSummary32(m,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);}else this.$FBRTCCallSummary32(m,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK);};j.prototype.onCallConnected=function(){'use strict';this.$FBRTCCallSummary31(i.NETWORK_READY);this.$FBRTCCallSummary31(i.CALL_CONNECTED);this.$FBRTCCallSummary24();};j.prototype.onCallEnded=function(k,l,m,n){'use strict';this.$FBRTCCallSummary10=m;this.$FBRTCCallSummary5=k;this.$FBRTCCallSummary6=n;this.$FBRTCCallSummary7=l;this.$FBRTCCallSummary31(i.CALL_ENDED);this.$FBRTCCallSummary24();};j.prototype.toString=function(){'use strict';var k={};k.core_metrics=this.$FBRTCCallSummary36();k.time_series=null;return JSON.stringify(k);};j.prototype.$FBRTCCallSummary36=function(){'use strict';var k={};k.ver=j.CURRENT_SUMMARY_VERSION;k.caller=this.$FBRTCCallSummary1;k.call_type=this.$FBRTCCallSummary27;k.conn=this.$FBRTCCallSummary37();k.peer_id=this.peerID;k.has_video=true;k.open_count=this.$FBRTCCallSummary21;k.signaling=this.$FBRTCCallSummary38();k.sender=this.$FBRTCCallSummary39();k.receiver=this.$FBRTCCallSummary40();k.end=this.$FBRTCCallSummary41();k.video=this.$FBRTCCallSummary42();return k;};j.prototype.$FBRTCCallSummary37=function(){'use strict';var k={dtls:1};if(this.$FBRTCCallSummary11.sender&&this.$FBRTCCallSummary11.sender.rtt)k.rtt=this.$FBRTCCallSummary11.sender.rtt;return k;};j.prototype.$FBRTCCallSummary38=function(){'use strict';var k={};if(this.$FBRTCCallSummary3)k.trigger=this.$FBRTCCallSummary3;k.start_time=this.$FBRTCCallSummary2;k.time_from_start=this.$FBRTCCallSummary4;var l=this.$FBRTCCallSummary4[i.CALL_CONNECTED],m=this.$FBRTCCallSummary4[i.CALL_ENDED];if(l){if(!m)if(this.$FBRTCCallSummary9){m=this.$FBRTCCallSummary9-this.$FBRTCCallSummary2;}else m=this.$FBRTCCallSummary43();var n=m-l;if(n>0)k.duration=n;}k.new_time_from_start=this.$FBRTCCallSummary19;l=this.$FBRTCCallSummary19[i.CALL_CONNECTED];m=this.$FBRTCCallSummary19[i.CALL_ENDED];if(l){if(!m)if(this.$FBRTCCallSummary18>0){m=this.$FBRTCCallSummary18;}else m=this.$FBRTCCallSummary30();n=m-l;if(n>0)k.new_duration=n;}return k;};j.prototype.$FBRTCCallSummary39=function(){'use strict';var k={};if(this.$FBRTCCallSummary13)k.ice_g0=this.$FBRTCCallSummary13;if(this.$FBRTCCallSummary15)k.ice=this.$FBRTCCallSummary15;if(this.$FBRTCCallSummary11.sender)Object.assign(k,this.$FBRTCCallSummary11.sender);return k;};j.prototype.$FBRTCCallSummary40=function(){'use strict';var k={};if(this.$FBRTCCallSummary14)k.ice_g0=this.$FBRTCCallSummary14;if(this.$FBRTCCallSummary16)k.ice=this.$FBRTCCallSummary16;return k;};j.prototype.$FBRTCCallSummary41=function(){'use strict';var k={};if(this.$FBRTCCallSummary5!==null){k.end_call_reason_string=c('FBRTCConstants').callEndReasonString(this.$FBRTCCallSummary5);if(this.$FBRTCCallSummary6!==null)k.end_call_subreason_string=this.$FBRTCCallSummary6;k.remote_ended=this.$FBRTCCallSummary7;}if(this.$FBRTCCallSummary11.end)Object.assign(k,this.$FBRTCCallSummary11.end);return k;};j.prototype.$FBRTCCallSummary42=function(){'use strict';var k={capture:{}};if(this.$FBRTCCallSummary11.video&&this.$FBRTCCallSummary11.video.sender)Object.assign(k,this.$FBRTCCallSummary11.video.sender);if(this.$FBRTCCallSummary12)Object.assign(k.capture,this.$FBRTCCallSummary12);return {sender:k,ld:this.$FBRTCCallSummary28,rd:this.$FBRTCCallSummary29};};j.prototype.$FBRTCCallSummary43=function(){'use strict';return new Date().valueOf()-this.$FBRTCCallSummary2;};j.prototype.$FBRTCCallSummary30=function(){'use strict';var k=c('performanceNow')()-this.$FBRTCCallSummary17;return Math.floor(this.$FBRTCCallSummary18+k);};j.prototype.$FBRTCCallSummary31=function(k){'use strict';if(this.$FBRTCCallSummary4[k])return;this.$FBRTCCallSummary4[k]=this.$FBRTCCallSummary43();this.$FBRTCCallSummary19[k]=this.$FBRTCCallSummary30();};j.prototype.$FBRTCCallSummary32=function(k,l,m){'use strict';if(k){this.$FBRTCCallSummary31(m);}else this.$FBRTCCallSummary31(l);};j.prototype.$FBRTCCallSummary24=function(){'use strict';this.$FBRTCCallSummary8=new Date().valueOf();};j.prototype.$FBRTCCallSummary23=function(){'use strict';return {device:c('UserAgentData').deviceName,os:c('UserAgentData').platformName,os_version:c('UserAgentData').platformFullVersion,browser:c('UserAgentData').browserName,browser_version:c('UserAgentData').browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth};};f.exports=j;},null);
__d('FBRTCCallSummaryStore',['CacheStorage','FBRTCCallSummary','FBRTCLogger','areEqual'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='localstorage',i='RTC_CALL_SUMMARY_',j='summary',k=2000,l=3,m=3*60*1000,n=null;o.getInstance=function(){'use strict';if(!n)n=new o();return n;};function o(){'use strict';this.$FBRTCCallSummaryStore1=new (c('CacheStorage'))(h,i);this.$FBRTCCallSummaryStore2=c('FBRTCLogger').getInstance();}o.prototype.storeCallSummary=function(p,q,r){'use strict';var s=this;this.$FBRTCCallSummaryStore3(function(t){if(!t[p])t[p]={};var u=t[p][q];if(u){var v=s.$FBRTCCallSummaryStore4(u);if(v&&v.getLastUpdatedTime()>r.getLastUpdatedTime()){s.$FBRTCCallSummaryStore2.logToConsole('Outdated summaries');return null;}}t[p][q]=s.$FBRTCCallSummaryStore5(r);return t;},s.$FBRTCCallSummaryStore2.logError.bind(s.$FBRTCCallSummaryStore2,p,q));};o.prototype.retrieveCallSummary=function(p,q){'use strict';var r=this.$FBRTCCallSummaryStore6(),s=null;if(r[p])s=r[p][q];if(s){return this.$FBRTCCallSummaryStore4(s);}else return null;};o.prototype.removeCallSummary=function(p,q){'use strict';this.removeCallSummaries([{peerID:p,callID:q}]);};o.prototype.removeCallSummaries=function(p){'use strict';var q=this;this.$FBRTCCallSummaryStore3(function(r){var s=p.length;for(var t=0;t<s;t++){var u=p[t].peerID,v=p[t].callID;if(r[u]&&r[u][v]){delete r[u][v];if(q.$FBRTCCallSummaryStore7(r[u]))delete r[u];}}return r;},q.$FBRTCCallSummaryStore2.logError.bind(q.$FBRTCCallSummaryStore2,null,null));};o.prototype.getLoggableSummaries=function(){'use strict';var p=this.$FBRTCCallSummaryStore6(),q=[];for(var r in p)if(p.hasOwnProperty(r))for(var s in p[r])if(p[r].hasOwnProperty(s)){var t=this.$FBRTCCallSummaryStore4(p[r][s],m);if(t)q.push(t);}return q;};o.prototype.$FBRTCCallSummaryStore7=function(p){'use strict';for(var q in p)if(p.hasOwnProperty(q))return false;return true;};o.prototype.$FBRTCCallSummaryStore5=function(p){'use strict';var q={__t:Date.now(),__d:p.toJsonString()};return q;};o.prototype.$FBRTCCallSummaryStore4=function(p,q){'use strict';if(p)if(!q||Date.now()-p.__t>=q)return c('FBRTCCallSummary').fromJsonString(p.__d);return null;};o.prototype.$FBRTCCallSummaryStore6=function(){'use strict';var p=this.$FBRTCCallSummaryStore1.get(j)||{};return p;};o.prototype.$FBRTCCallSummaryStore3=function(p,q,r,s){'use strict';if(r===undefined||r===null)r=l;var t=this.$FBRTCCallSummaryStore6(),u=this.$FBRTCCallSummaryStore6(),v=p(t);if(v===null)return;var w=this.$FBRTCCallSummaryStore6();if(c('areEqual')(u,w)){this.$FBRTCCallSummaryStore1.set(j,v);this.$FBRTCCallSummaryStore2.logToConsole('Updated summaries');}else if(r>0){q('Retry lock');if(s){var x=this;setTimeout(function(){x.$FBRTCCallSummaryStore3(p,q,r-1,true);},k);}else this.$FBRTCCallSummaryStore3(p,q,r-1,true);}else q('Failed to lock');};f.exports=o;},null);
__d('FBRTCCallSummaryUploader',['Banzai','FBRTCCallSummary','FBRTCCallSummaryStore'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={init:function(){var i=c('FBRTCCallSummaryStore').getInstance();c('Banzai').subscribe(c('Banzai').SEND,function(){c('FBRTCCallSummary').logSavedSummaries(i);});}};f.exports=h;},null);
__d('P2PDialogStore',['EventEmitter','P2PActionConstants','P2PDispatcher'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=void 0,k={};h=babelHelpers.inherits(l,c('EventEmitter'));i=h&&h.prototype;function l(){i.constructor.call(this);j=c('P2PDispatcher').register(this.onEventDispatched.bind(this));k={dialogClass:null,dialogProps:null};}l.prototype.getState=function(){return k;};l.prototype.onEventDispatched=function(m){var n=m.type,o=m.data;switch(n){case c('P2PActionConstants').DIALOG_SHOWN:k.dialogClass=o.dialogClass;k.dialogProps=o.dialogProps;this.emit('change');break;case c('P2PActionConstants').DIALOG_CLOSED:k.dialogClass=null;k.dialogProps=null;this.emit('change');break;}};f.exports=new l();},null);
__d('P2PDialogContainer.react',['P2PDialogStore','React'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return k=(l=i.constructor).call.apply(l,[this].concat(n)),this.state=c('P2PDialogStore').getState(),this.onDialogStoreChange=function(){this.setState(c('P2PDialogStore').getState());}.bind(this),k;}j.prototype.componentDidMount=function(){this.dialogStoreSub=c('P2PDialogStore').addListener('change',this.onDialogStoreChange);};j.prototype.componentWillUnmount=function(){if(this.dialogStoreSub){this.dialogStoreSub.remove();this.dialogStoreSub=null;}};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c('React').createElement(k,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));};f.exports=j;},null);
__d('P2PDialogContainerMount',['P2PDialogContainer.react','React','ReactDOM'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={mount:function(i){c('ReactDOM').render(c('React').createElement(c('P2PDialogContainer.react'),null),i);}};f.exports=h;},null);
__d('PagesPlatformActionConstants',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={BOOKING_REQUEST_ACCEPT_ERROR:'booking_request_accept_error',BOOKING_REQUEST_ACCEPT_INITIATED:'booking_request_accept_initiated',BOOKING_REQUEST_ACCEPTED:'booking_request_accepted',BOOKING_REQUEST_CREATED:'booking_request_created',BOOKING_REQUEST_DECLINE_ERROR:'booking_request_decline_error',BOOKING_REQUEST_DECLINE_INITIATED:'booking_request_decline_initiated',BOOKING_REQUEST_DECLINED:'booking_request_declined',BOOKING_REQUEST_RESCHEDULE_INITIATED:'booking_request_reschedule_initiated',BOOKING_REQUEST_RESCHEULED:'booking_request_reschedule',DIALOG_CLOSED:'dialog_closed',DIALOG_SHOWN:'dialog_shown',NEW_TIME_CHOSEN:'new_time_chosen'};f.exports=h;},null);
__d('PagesPlatformRequestDispatcher',['Dispatcher_DEPRECATED'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new (c('Dispatcher_DEPRECATED'))();},null);
__d('PagesPlatformDialogStore',['EventEmitter','PagesPlatformActionConstants','PagesPlatformRequestDispatcher'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j={};h=babelHelpers.inherits(k,c('EventEmitter'));i=h&&h.prototype;function k(){i.constructor.call(this);c('PagesPlatformRequestDispatcher').register(this.onEventDispatched.bind(this));j={dialogClass:null,dialogProps:null};}k.prototype.getState=function(){return j;};k.prototype.onEventDispatched=function(l){var m=l.type,n=l.data;switch(m){case c('PagesPlatformActionConstants').DIALOG_SHOWN:j.dialogClass=n.dialogClass;j.dialogProps=n.dialogProps;this.emit('change');break;case c('PagesPlatformActionConstants').DIALOG_CLOSED:j.dialogClass=null;j.dialogProps=null;this.emit('change');break;}};f.exports=new k();},null);
__d('PagesPlatformDialogContainer.react',['PagesPlatformDialogStore','PureStoreBasedStateMixin','React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'PagesPlatformDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('PagesPlatformDialogStore'))],statics:{calculateState:function(){return c('PagesPlatformDialogStore').getState();}},render:function(){if(!this.state.dialogClass)return null;var i=this.state.dialogClass;return c('React').createElement(i,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));}});f.exports=h;},null);
__d('PagesPlatformDialogContainerMount',['PagesPlatformDialogContainer.react','React','ReactDOM'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={mount:function(i){c('ReactDOM').render(c('React').createElement(c('PagesPlatformDialogContainer.react'),null),i);}};f.exports=h;},null);